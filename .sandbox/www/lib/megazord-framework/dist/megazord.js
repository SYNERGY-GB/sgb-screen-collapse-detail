!function e(r,t,n){function a(i,s){if(!t[i]){if(!r[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=t[i]={exports:{}};r[i][0].call(l.exports,function(e){var t=r[i][1][e];return a(t?t:e)},l,l.exports,e,r,t,n)}return t[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(e,r,t){"use strict";angular.module("megazord",["ngLodash","pascalprecht.translate"]),e("./router"),e("./screenDirective"),e("./templateDirective"),e("./screen"),e("./dataLoader")},{"./dataLoader":2,"./router":3,"./screen":4,"./screenDirective":5,"./templateDirective":6}],2:[function(e,r,t){"use strict";angular.module("megazord").provider("_dataLoader",function(){this.$get=["$rootScope","$injector","$q","lodash","$translate","$ionicPopup",function(e,r,t,n,a,o){return{loadConnector:function(e,t){if(t){var n=t.params;e.inputTransform&&(n=r.invoke(e.inputTransform,null,{_data:n}));var a={name:t.name,params:n};return this.load(e,a)}return this.load(e,t)},loadInternal:function(n,a){var o;if(n){var i=r.get(n.type),s=n.outputTransform,u=n.params;e.$broadcast("_dataLoadStarted",{source:n}),o=i.getData(u,a).then(function(e){return s&&(e=r.invoke(s,null,{data:e})),e})["finally"](function(){e.$broadcast("_dataLoadFinished",{source:n})})}else o=t.when({});return o},load:function(e,n){var i=this.loadInternal(e,n);return e.onError?i["catch"](function(i){var s=e.onError;switch(s.perform){case"message":return o.alert({title:a.instant("error"),subTitle:a.instant(s.value)}),t.reject({message:s.value,error:i});case"transition":return r.invoke(["_globalRouter",function(e){e.goToState(s.value,n)}]),t.reject(i);case"function":return t.when(r.invoke(s.value,null,{_error:i,_event:n}));default:var u="Unsupported perform for dataSource onError: "+s.perform;return console.error(u),t.reject(u)}}):i}}}]})},{}],3:[function(e,r,t){"use strict";angular.module("megazord").factory("_routerState",function(){return{lastEvents:{}}}).provider("_globalRouter",function(){var e=null;this.routes=function(r){e=r},this.$get=["$state","$injector","$ionicHistory","lodash","_dataLoader","_routerState",function(r,t,n,a,o,i){return{fireEvent:function(e){return this.fireEventInternal(e)},fireEventInternal:function(t){var n=r.current,a=n.name,o=e[a];if(!o)return void console.error('No routes found for screen "'+a+'".');var i=o[t.name];return i?this.goToState(i,t):void console.error('No route found for event "'+t.name+'" in screen "'+a+'"')},fireConnectorEvent:function(e,r){var n=this,a=o.loadConnector(r,e);return r.resolveTransition?t.invoke(r.resolveTransition,null,{_result:a,_event:e}).then(function(e){n.fireEventInternal(e)}):a.then(function(){n.fireEventInternal(e)})},goToState:function(e,t){var a=r.get(e);if(!a)return void console.error('State not found: "'+e+'"');var o=a.disableBack;return o&&n.nextViewOptions({disableBack:!0}),i.lastEvents[e]=t,console.log("Transitioning..."),r.go(e)},createContextual:function(e){return a.defaults({fireEvent:function(r){if(e){var t=e[r.name];if(t)return this.fireConnectorEvent(r,t)}return this.fireEventInternal(r)}},this)}}}]})},{}],4:[function(e,r,t){"use strict";angular.module("megazord").provider("_screen",function(){this.$get=["lodash",function(e){return{initialize:function(r,t){r._screenParams=t,e.defaults(t,{title:t.screenName})}}}]})},{}],5:[function(e,r,t){"use strict";angular.module("megazord").directive("mzScreen",["lodash",function(e){return{restrict:"A",link:function(r,t,n){var a=e.last(r._screenParams.screenName.split(".")),o=r._screenParams.screenType;t.addClass(o),t.addClass(a)}}}])},{}],6:[function(e,r,t){"use strict";angular.module("megazord").directive("mzTemplate",[function(){return{restrict:"E",template:'<ng-include src="_templateUrl"/>',scope:{templateType:"=",screenParams:"=",bindTo:"=",params:"="},link:function(e){e.$watch("templateType",function(r){if(r){var t,n,a=r,o=e.bindTo;if(!a)return void console.error("Must specify templateType attribute in mzTemplate directive.");if(!e.screenParams)return void console.error("Must specify screenParams attribute in mzTemplate directive.");t="function"==typeof a?a(o):a;var i;0==e.screenParams.screenType.indexOf("@")?(n=e.screenParams.screenType.slice(1,e.screenParams.screenType.length),i="screens"):(n=e.screenParams.screenType,i="lib"),e._templateUrl=0==t.indexOf("@")?i+"/"+n+"/templates/"+t.slice(1,t.length)+".html":"templates/"+t}})}}}])},{}]},{},[1]);
//# sourceMappingURL=megazord.js.map